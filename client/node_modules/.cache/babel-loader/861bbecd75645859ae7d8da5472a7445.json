{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\bulhi\\\\#work\\\\git\\\\Rani9\\\\Uploader\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\bulhi\\\\#work\\\\git\\\\Rani9\\\\Uploader\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\bulhi\\\\#work\\\\git\\\\Rani9\\\\Uploader\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{useCallback,useState}from\"react\";export var useHttp=function useHttp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var request=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var method,body,toJSON,headers,response,data,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';body=_args.length>2?_args[2]:undefined;toJSON=_args.length>3?_args[3]:undefined;headers=_args.length>4?_args[4]:undefined;setLoading(true);_context.prev=5;// console.log(url)\n// if (body.toString() == '[object FormData]') {\n//     console.log(56576)\n// }\nif(toJSON){body=JSON.stringify(body);}// console.log(body)\n//  \n_context.next=9;return fetch(url,{method:method,body:body,headers:headers});case 9:response=_context.sent;_context.next=12;return response.json();case 12:data=_context.sent;// console.log(!response.ok)\nif(!response.ok){setLoading(false);setError(data);// return new Error(data.message || 'Что-то пошло не так')\n}setLoading(false);return _context.abrupt(\"return\",data);case 18:_context.prev=18;_context.t0=_context[\"catch\"](5);setLoading(false);setError(_context.t0);// throw error\ncase 22:case\"end\":return _context.stop();}}},_callee,null,[[5,18]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=useCallback(function(){return setError(null);},[]);return{loading:loading,request:request,error:error,clearError:clearError};};","map":{"version":3,"sources":["C:/bulhi/#work/git/Rani9/Uploader/client/src/hooks/http.hooks.js"],"names":["useCallback","useState","useHttp","loading","setLoading","error","setError","request","url","method","body","toJSON","headers","JSON","stringify","fetch","response","json","data","ok","clearError"],"mappings":"2fAAA,OAASA,WAAT,CAAsBC,QAAtB,KAAsC,OAAtC,CAGA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,eACKD,QAAQ,CAAC,KAAD,CADb,wCAClBE,OADkB,eACTC,UADS,8BAECH,QAAQ,CAAC,IAAD,CAFT,yCAElBI,KAFkB,eAEXC,QAFW,eAIzB,GAAMC,CAAAA,OAAO,CAAGP,WAAW,0FAAC,iBAAOQ,GAAP,+KAAYC,MAAZ,+CAAqB,KAArB,CAA4BC,IAA5B,mCAAkCC,MAAlC,mCAA0CC,OAA1C,mCACxBR,UAAU,CAAC,IAAD,CAAV,CADwB,gBAIpB;AACA;AACA;AACA;AACA,GAAIO,MAAJ,CAAY,CACRD,IAAI,CAAGG,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAP,CACH,CACD;AACA;AAZoB,sBAaGK,CAAAA,KAAK,CAACP,GAAD,CAAM,CAAEC,MAAM,CAANA,MAAF,CAAUC,IAAI,CAAJA,IAAV,CAAgBE,OAAO,CAAPA,OAAhB,CAAN,CAbR,QAadI,QAbc,sCAcDA,CAAAA,QAAQ,CAACC,IAAT,EAdC,SAcdC,IAdc,eAgBpB;AACA,GAAI,CAACF,QAAQ,CAACG,EAAd,CAAkB,CACdf,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAACY,IAAD,CAAR,CACA;AACH,CAGDd,UAAU,CAAC,KAAD,CAAV,CAxBoB,gCA0Bbc,IA1Ba,4DA4BpBd,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,aAAR,CACA;AA9BoB,qEAAD,+DAiCxB,EAjCwB,CAA3B,CAoCA,GAAMc,CAAAA,UAAU,CAAGpB,WAAW,CAAC,iBAAMM,CAAAA,QAAQ,CAAC,IAAD,CAAd,EAAD,CAAuB,EAAvB,CAA9B,CAEA,MAAO,CAAEH,OAAO,CAAPA,OAAF,CAAWI,OAAO,CAAPA,OAAX,CAAoBF,KAAK,CAALA,KAApB,CAA2Be,UAAU,CAAVA,UAA3B,CAAP,CACH,CA3CM","sourcesContent":["import { useCallback, useState } from \"react\"\r\n\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n    const request = useCallback(async (url, method = 'GET', body, toJSON, headers) => {\r\n        setLoading(true)\r\n\r\n        try {\r\n            // console.log(url)\r\n            // if (body.toString() == '[object FormData]') {\r\n            //     console.log(56576)\r\n            // }\r\n            if (toJSON) {\r\n                body = JSON.stringify(body)\r\n            }\r\n            // console.log(body)\r\n            //  \r\n            const response = await fetch(url, { method, body, headers })\r\n            const data = await response.json()\r\n\r\n            // console.log(!response.ok)\r\n            if (!response.ok) {\r\n                setLoading(false)\r\n                setError(data)\r\n                // return new Error(data.message || 'Что-то пошло не так')\r\n            }\r\n\r\n\r\n            setLoading(false)\r\n\r\n            return data\r\n        } catch (error) {\r\n            setLoading(false)\r\n            setError(error)\r\n            // throw error\r\n\r\n        }\r\n    }, [])\r\n\r\n\r\n    const clearError = useCallback(() => setError(null), [])\r\n\r\n    return { loading, request, error, clearError }\r\n}"]},"metadata":{},"sourceType":"module"}