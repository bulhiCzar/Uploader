{"ast":null,"code":"var _jsxFileName = \"C:\\\\bulhi\\\\#work\\\\downloadFileServer\\\\client\\\\src\\\\pages\\\\UploadPage.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useHttp } from '../hooks/http.hooks';\nimport modalInfo from '../modules/toast/main';\n\nfunction UploadPage() {\n  const {\n    loading,\n    error,\n    request,\n    clearError\n  } = useHttp();\n  const [selectedFiles, setSelectedFiles] = useState(undefined);\n\n  const selectFile = event => {\n    setSelectedFiles(event.target.files);\n    console.log(selectedFiles);\n  };\n\n  useEffect(() => {\n    modalInfo(error); // setTimeout(() => {\n    //     clearError(null)\n    // }, 1500)\n\n    clearError(null); // console.log(error)\n  }, [error, clearError]);\n\n  async function uploadSubmit(e) {\n    e.preventDefault();\n\n    try {\n      const header = {\n        'Content-Type': 'multipart/form-data'\n      };\n      const data = await request('/api/file/upload', 'POST', selectedFiles, header);\n      console.log(data); // auth.login(data.token, data.userId)\n    } catch (error) {}\n  }\n\n  return (\n    /*#__PURE__*/\n    // <form onSubmit={uploadSubmit}>\n    //     <label>Файл</label><br />\n    //     <input type=\"file\" id=\"getFiles\" multiple onChange={selectFile} />\n    //     <button type=\"submit\" name=\"file\" disabled={loading}>Обработать</button>\n    // </form>\n    React.createElement(\"form\", {\n      class: \"box\",\n      method: \"post\",\n      action: \"\",\n      enctype: \"multipart/form-data\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"box__input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      class: \"box__file\",\n      type: \"file\",\n      name: \"files[]\",\n      id: \"file\",\n      \"data-multiple-caption\": \"{count} files selected\",\n      multiple: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 23\n      }\n    }, \"Choose a file\"), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"box__dragndrop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 53\n      }\n    }, \" or drag it here\"), \".\"), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"box__button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }\n    }, \"Upload\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"box__uploading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 3\n      }\n    }, \"Uploading\\u2026\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"box__success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 3\n      }\n    }, \"Done!\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"box__error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 3\n      }\n    }, \"Error! \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 34\n      }\n    }), \".\"))\n  );\n}\n\nexport default UploadPage;","map":{"version":3,"sources":["C:/bulhi/#work/downloadFileServer/client/src/pages/UploadPage.js"],"names":["React","useEffect","useState","useHttp","modalInfo","UploadPage","loading","error","request","clearError","selectedFiles","setSelectedFiles","undefined","selectFile","event","target","files","console","log","uploadSubmit","e","preventDefault","header","data"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;;AAGA,SAASC,UAAT,GAAsB;AAClB,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA,OAAlB;AAA2BC,IAAAA;AAA3B,MAA0CN,OAAO,EAAvD;AAEA,QAAM,CAACO,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAACU,SAAD,CAAlD;;AAEA,QAAMC,UAAU,GAAIC,KAAD,IAAW;AAC1BH,IAAAA,gBAAgB,CAACG,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAhB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYR,aAAZ;AACH,GAHD;;AAOAT,EAAAA,SAAS,CAAC,MAAM;AACZG,IAAAA,SAAS,CAACG,KAAD,CAAT,CADY,CAEZ;AACA;AACA;;AACAE,IAAAA,UAAU,CAAC,IAAD,CAAV,CALY,CAMZ;AACH,GAPQ,EAON,CAACF,KAAD,EAAQE,UAAR,CAPM,CAAT;;AAUA,iBAAeU,YAAf,CAA4BC,CAA5B,EAA+B;AAC3BA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI;AACA,YAAMC,MAAM,GAAG;AAAE,wBAAgB;AAAlB,OAAf;AACA,YAAMC,IAAI,GAAG,MAAMf,OAAO,CAAC,kBAAD,EAAqB,MAArB,EAA6BE,aAA7B,EAA4CY,MAA5C,CAA1B;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYK,IAAZ,EAHA,CAIA;AACH,KALD,CAKE,OAAOhB,KAAP,EAAc,CAAG;AACtB;;AAGD;AAAA;AACI;AACA;AACA;AACA;AACA;AACA;AAAM,MAAA,KAAK,EAAC,KAAZ;AAAkB,MAAA,MAAM,EAAC,MAAzB;AAAgC,MAAA,MAAM,EAAC,EAAvC;AAA0C,MAAA,OAAO,EAAC,qBAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACN;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,WAAb;AAAyB,MAAA,IAAI,EAAC,MAA9B;AAAqC,MAAA,IAAI,EAAC,SAA1C;AAAoD,MAAA,EAAE,EAAC,MAAvD;AAA8D,+BAAsB,wBAApF;AAA6G,MAAA,QAAQ,MAArH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAO,MAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAlB,eAAgD;AAAM,MAAA,KAAK,EAAC,gBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAhD,MAFF,eAGE;AAAQ,MAAA,KAAK,EAAC,aAAd;AAA4B,MAAA,IAAI,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,CADM,eAMN;AAAK,MAAA,KAAK,EAAC,gBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBANM,eAON;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAPM,eAQN;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/B,MARM;AANJ;AAiBH;;AAED,eAAeF,UAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useHttp } from '../hooks/http.hooks'\r\nimport modalInfo from '../modules/toast/main'\r\n\r\n\r\nfunction UploadPage() {\r\n    const { loading, error, request, clearError } = useHttp()\r\n\r\n    const [selectedFiles, setSelectedFiles] = useState(undefined)\r\n\r\n    const selectFile = (event) => {\r\n        setSelectedFiles(event.target.files)\r\n        console.log(selectedFiles)\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        modalInfo(error)\r\n        // setTimeout(() => {\r\n        //     clearError(null)\r\n        // }, 1500)\r\n        clearError(null)\r\n        // console.log(error)\r\n    }, [error, clearError])\r\n\r\n\r\n    async function uploadSubmit(e) {\r\n        e.preventDefault()\r\n        try {\r\n            const header = { 'Content-Type': 'multipart/form-data' }\r\n            const data = await request('/api/file/upload', 'POST', selectedFiles, header)\r\n            console.log(data)\r\n            // auth.login(data.token, data.userId)\r\n        } catch (error) { }\r\n    }\r\n\r\n\r\n    return (\r\n        // <form onSubmit={uploadSubmit}>\r\n        //     <label>Файл</label><br />\r\n        //     <input type=\"file\" id=\"getFiles\" multiple onChange={selectFile} />\r\n        //     <button type=\"submit\" name=\"file\" disabled={loading}>Обработать</button>\r\n        // </form>\r\n        <form class=\"box\" method=\"post\" action=\"\" enctype=\"multipart/form-data\">\r\n  <div class=\"box__input\">\r\n    <input class=\"box__file\" type=\"file\" name=\"files[]\" id=\"file\" data-multiple-caption=\"{count} files selected\" multiple />\r\n    <label for=\"file\"><strong>Choose a file</strong><span class=\"box__dragndrop\"> or drag it here</span>.</label>\r\n    <button class=\"box__button\" type=\"submit\">Upload</button>\r\n  </div>\r\n  <div class=\"box__uploading\">Uploading…</div>\r\n  <div class=\"box__success\">Done!</div>\r\n  <div class=\"box__error\">Error! <span></span>.</div>\r\n</form>\r\n    )\r\n}\r\n\r\nexport default UploadPage"]},"metadata":{},"sourceType":"module"}