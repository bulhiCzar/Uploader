{"ast":null,"code":"import _slicedToArray from\"C:\\\\bulhi\\\\#work\\\\git\\\\Rani9\\\\Uploader\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from\"react\";var storageName='userData';export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ready=_useState4[0],setReady=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];// const [userLogin, setUserLogin] = useState(null)\nvar login=useCallback(function(jwtToken,id){setToken(jwtToken);setUserId(id);// console.log(id)\nlocalStorage.setItem(storageName,JSON.stringify({userId:id,token:jwtToken}));},[]);var logout=useCallback(function(){setToken(null);setUserId(null);localStorage.removeItem(storageName);},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){login(data.token,data.id);}setReady(true);},[login]);var id=function id(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){// console.log(data)\nreturn data.id;}};return{login:login,logout:logout,token:token,userId:userId,id:id,ready:ready};};","map":{"version":3,"sources":["C:/bulhi/#work/git/Rani9/Uploader/client/src/hooks/auth.hooks.js"],"names":["useCallback","useEffect","useState","storageName","useAuth","token","setToken","ready","setReady","userId","setUserId","login","jwtToken","id","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"mappings":"0KAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,QAAjC,KAAiD,OAAjD,CAEA,GAAMC,CAAAA,WAAW,CAAG,UAApB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,eACCF,QAAQ,CAAC,IAAD,CADT,wCAClBG,KADkB,eACXC,QADW,8BAECJ,QAAQ,CAAC,KAAD,CAFT,yCAElBK,KAFkB,eAEXC,QAFW,8BAGGN,QAAQ,CAAC,IAAD,CAHX,yCAGlBO,MAHkB,eAGVC,SAHU,eAIzB;AAIA,GAAMC,CAAAA,KAAK,CAAGX,WAAW,CAAC,SAACY,QAAD,CAAWC,EAAX,CAAkB,CACxCP,QAAQ,CAACM,QAAD,CAAR,CACAF,SAAS,CAACG,EAAD,CAAT,CACA;AAEAC,YAAY,CAACC,OAAb,CAAqBZ,WAArB,CAAkCa,IAAI,CAACC,SAAL,CAAe,CAC7CR,MAAM,CAAEI,EADqC,CACjCR,KAAK,CAAEO,QAD0B,CAAf,CAAlC,EAGH,CARwB,CAQtB,EARsB,CAAzB,CAYA,GAAMM,CAAAA,MAAM,CAAGlB,WAAW,CAAC,UAAM,CAC7BM,QAAQ,CAAC,IAAD,CAAR,CACAI,SAAS,CAAC,IAAD,CAAT,CAEAI,YAAY,CAACK,UAAb,CAAwBhB,WAAxB,EAEH,CANyB,CAMvB,EANuB,CAA1B,CASAF,SAAS,CAAC,UAAM,CACZ,GAAMmB,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBnB,WAArB,CAAX,CAAb,CAEA,GAAIiB,IAAI,EAAIA,IAAI,CAACf,KAAjB,CAAwB,CACpBM,KAAK,CAACS,IAAI,CAACf,KAAN,CAAae,IAAI,CAACP,EAAlB,CAAL,CACH,CACDL,QAAQ,CAAC,IAAD,CAAR,CACH,CAPQ,CAON,CAACG,KAAD,CAPM,CAAT,CASA,GAAME,CAAAA,EAAE,CAAG,QAALA,CAAAA,EAAK,EAAM,CACb,GAAMO,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBnB,WAArB,CAAX,CAAb,CAEA,GAAIiB,IAAI,EAAIA,IAAI,CAACf,KAAjB,CAAwB,CACpB;AACA,MAAOe,CAAAA,IAAI,CAACP,EAAZ,CACH,CACJ,CAPD,CASA,MAAO,CAAEF,KAAK,CAALA,KAAF,CAASO,MAAM,CAANA,MAAT,CAAiBb,KAAK,CAALA,KAAjB,CAAwBI,MAAM,CAANA,MAAxB,CAAgCI,EAAE,CAAFA,EAAhC,CAAoCN,KAAK,CAALA,KAApC,CAAP,CACH,CAhDM","sourcesContent":["import { useCallback, useEffect, useState } from \"react\"\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n    const [userId, setUserId] = useState(null)\r\n    // const [userLogin, setUserLogin] = useState(null)\r\n\r\n\r\n\r\n    const login = useCallback((jwtToken, id) => {\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        // console.log(id)\r\n\r\n        localStorage.setItem(storageName, JSON.stringify({\r\n            userId: id, token: jwtToken\r\n        }))\r\n    }, [])\r\n\r\n\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null)\r\n        setUserId(null)\r\n\r\n        localStorage.removeItem(storageName)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            login(data.token, data.id)\r\n        }\r\n        setReady(true)\r\n    }, [login])\r\n\r\n    const id = () => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            // console.log(data)\r\n            return data.id\r\n        }\r\n    }\r\n\r\n    return { login, logout, token, userId, id, ready }\r\n}"]},"metadata":{},"sourceType":"module"}